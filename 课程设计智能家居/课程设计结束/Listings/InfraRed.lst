C51 COMPILER V9.59.0.0   INFRARED                                                          06/28/2019 08:52:56 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE INFRARED
OBJECT MODULE PLACED IN .\Objects\InfraRed.obj
COMPILER INVOKED BY: E:\keil V5\C51\BIN\C51.EXE Hardware\InfraRed\InfraRed.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Hardware\
                    -Key;.\System;.\Hardware\InfraRed;.\Hardware\Secret;.\Hardware\LCD1602;.\Hardware\DS18B20;.\Hardware\DS1302;.\Hardware\II
                    -C;.\Hardware\PCF8591;.\Hardware\ULN2003) DEBUG OBJECTEXTEND PRINT(.\Listings\InfraRed.lst) TABS(2) OBJECT(.\Objects\Infr
                    -aRed.obj)

line level    source

   1          #include "Sys.h"
   2          
   3          
   4          uchar IRtime;    //ߵ͵ƽʱ
   5          uchar IRcord[4]; //4ֽ
   6          uchar IRdata[33];//ʼڵ33λ
   7          bit IRpro_ok;    //4ֽݽɱ־λ
   8          bit IRok;        //33λݽɱ־λ
   9          
  10          
  11          void init()
  12          {
  13   1          TMOD|=0x02;//öʱ0ģʽ28λԶװ
  14   1          TL0=TH0=0;//ʼʱ0Ĵʱ0һʱΪ256
  15   1          EA=1;
  16   1          ET0=1;
  17   1          TR0=1;
  18   1          
  19   1          IT0=1;//ⲿж0شʽ
  20   1          EX0=1;
  21   1          
  22   1      
  23   1      }
  24          
  25          
  26          //ʱжϣÿжһҪ256*1.085us=277.76us256ڣƵλ11.0592Mhz=12*
             -ڣ
  27          void time0() interrupt 1
  28          {
  29   1          IRtime++;//277.76us
  30   1      }
  31          
  32          //ⲿж033
  33          void int0() interrupt 0
  34          {
  35   1          static uchar i;//̬ڴ33ݼ
  36   1          static bit startflag;//ʼ־λ
  37   1          if(startflag)//־1ʼ洢33ȣһλһλ
  38   1          {
  39   2              if((IRtime<53)&&(IRtime>=32))i=0;//ж룬ʼ뿪ʼ
  40   2              IRdata[i]=IRtime;//T0Ĵʱ
  41   2              IRtime=0;//
  42   2              i++;//Լ
  43   2              if(i==33)//i=33ͱʾѾ33
  44   2              {
  45   3                  IRok=1;//
  46   3                  i=0;//׼´δ
  47   3              }
  48   2          }
  49   1          else
  50   1          {
  51   2              IRtime=0;//ʱ0㣬ΪʼʱˣʹûյҲټ
C51 COMPILER V9.59.0.0   INFRARED                                                          06/28/2019 08:52:56 PAGE 2   

  52   2              startflag=1;//ʼ־λ1
  53   2          }
  54   1      }
  55          
  56          //ȡ33 NECЭ
  57          void IRcordpro()
  58          {
  59   1          uchar i;//4ֽ
  60   1          uchar j;//ڴ1ֽڵ8λ
  61   1          uchar k;//ڼ33
  62   1          k=1;//ӵһλʼʼ
  63   1          for(i=0;i<4;i++)
  64   1          {
  65   2              for(j=0;j<8;j++)
  66   2              {
  67   3                  if(IRdata[k]>5)    IRcord[i]|=0x80;//0׼1125usôжΪ1
  68   3                  
  69   3                  if(j<7)    IRcord[i]>>=1;//ֻƶ7ΣֹһλƳ
  70   3                  k++;//һ
  71   3              }
  72   2          }
  73   1          IRpro_ok=1;//
  74   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    190    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     39       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      3    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
